<?xml version="1.0" encoding="UTF-8"?>
<Configuration monitorInterval="60">
  <Properties>
    <Property name="baseDir">logs</Property>
  </Properties>
  <Appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
    <RollingFile 
    	name="MyRollingFile" 
    	fileName="${baseDir}/app.log" 
    	filePattern="${baseDir}/$${date:yyyy-MM}/app-%d{yyyy-MM-dd}-%i.log.gz"
    	ignoreExceptions="false"
    >
    	<PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    	<Policies>
             <TimeBasedTriggeringPolicy />
             <SizeBasedTriggeringPolicy size="1024KB"/>
         </Policies>
         <DefaultRolloverStrategy fileIndex="max" max="30">
         	<Delete basePath="${baseDir}" maxDepth="2">
	          <IfFileName glob="*/app-*.log.gz" />
	          <IfLastModified age="60d" />
	        </Delete>
         </DefaultRolloverStrategy>
    </RollingFile>
     
    
    <!--
    
    
    <File name="SpringLogFile" filename="logs/$${date:yyyy-MM}/spring-%d{yyyy-MM-dd}.log">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
    <File name="CatalinaLogFile" filename="logs/catalina.log">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
    <File name="ApacheLogFile" filename="logs/apache.log">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
    <File name="DefaultLogFile" filename="logs/other.log">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
    <File name="MyLogFile" filename="logs/app.log">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
     -->
  </Appenders>
  <Loggers>
   
    
    <!--
    <Logger name="org.springframework" level="warn">
    	<AppenderRef ref="SpringLogFile"/>
    </Logger>
    <Logger name="org.apache.catalina" level="warn">
    	<AppenderRef ref="CatalinaLogFile"/>
    </Logger>
    <Logger name="org.apache" level="warn">
    	<AppenderRef ref="ApacheLogFile"/>
    </Logger>
    <Logger name="com.yuansong.study" level="debug">
    	<AppenderRef ref="MyLogFile"/>
    </Logger>
     -->
    <Root level="debug">
      <AppenderRef ref="Console"/>
      <AppenderRef ref="MyRollingFile"/>
    </Root>
  </Loggers>
</Configuration>